

<!DOCTYPE html>
<html class="writer-html5" lang="en,pt-BR" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuração do Modem &mdash; CoopRobo 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Modem e Computador Embarcado" href="4.2-Modem_e_Computador.html" />
    <link rel="prev" title="Comunicação Via Modem" href="4.0-intro.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> CoopRobo
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Robots</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../aerial.html">Aerial Robots</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../vr01.html">VR-01</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../1-autopilot/1.0-pilot.html">Piloto Automatico</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-autopilot/1.1-config_pilot.html">Configuração do Piloto Automatico</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-embedded_system/2.0-embedded_system.html">Sistema Embarcado</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3-gumstix/3.0-intro.html">Utilizando o computador embarcado</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="4.0-intro.html">Comunicação Via Modem</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Configuração do Modem</a></li>
<li class="toctree-l4"><a class="reference internal" href="4.2-Modem_e_Computador.html">Modem e Computador Embarcado</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../vr01.html#referencias">Referências</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../mobile.html">Mobile Robots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../manipulators.html">Manipulators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs-ref.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../camera.html">Camera</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">CoopRobo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../aerial.html">Aerial Robots</a> &raquo;</li>
        
          <li><a href="../../vr01.html">VR-01</a> &raquo;</li>
        
          <li><a href="4.0-intro.html">Comunicação Via Modem</a> &raquo;</li>
        
      <li>Configuração do Modem</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/aerial/vr01/4-modem/4.1-Config_modem.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuracao-do-modem">
<h1>Configuração do Modem<a class="headerlink" href="#configuracao-do-modem" title="Permalink to this headline">¶</a></h1>
<p>Para que seja feita a configuração dos modens é necessário que este seja conectado a um computador regular. A comunicação de um computador regular com o modem é feita da mesma maneira que a comunicação de um computador regular com o computador embarcado, ou seja, por uma comunicação serial. Por padrão a comunicação serial do modem é feita por uma comunicação UART de 9600 baud/s, 8 bits de dados, sem bit de paridade e 1 bit de parada (<strong>8N1</strong>). Além dessas configurações da comunicação UART, é adotado ainda o padrão físico de conexão serial RS-232.</p>
<p>Logo, para conectar um computador regular ao modem é necessário, primeiro, um cabo conversor de <strong>USB para RS-232</strong>, similar ao apresentado na imagem a seguir. Assim como na comunicação com o computador embarcado, recomenda-se a utilização de um computador Linux com o programa &quot;<strong>screen</strong>&quot;para a configuração dos modens.</p>
<div class="figure align-center">
<img alt="../../../_images/USBtoRS.jpg" src="../../../_images/USBtoRS.jpg" />
</div>
<p>A configuração do modem só pode ser feita utilizando as configurações padrões do modem, ou seja, sempre que o modo configuração for ativado o modem retorna, temporariamente, para as configurações descritas no parágrafo anterior, após sair do modo de configuração o modem volta a operar de acordo com as configurações determinadas em seus registradores.</p>
<p>O modo de configuração pode ser iniciado de duas maneiras. Em ambos os casos é necessário, primeiro, conectar o computador regular ao modem, iniciar o terminal do computador regular e executar o programa &quot;screen&quot;, por exemplo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo screen /dev/ttyUSB0 9600
</pre></div>
</div>
<p>No caso da linha de comando do exemplo apresentada anteriormente, o termo <code class="docutils literal notranslate"><span class="pre">ttyUSB0</span></code> foi a porta encontrada ao utilizar o comando <code class="docutils literal notranslate"><span class="pre">dmesg</span></code> e &quot;<strong>9600</strong>&quot; é a velocidade de comunicação em <em>baud</em>. Nesse momento a comunicação entre o modem e o computador deve ser estabelecida e assim que o modem for ligado os caracteres devem começar a ser impressos na tela do computador.</p>
<p>A primeira maneira de acessar o modo de configuração é pressionar e segurar o botão &quot;<strong>CONFIG</strong>&quot;, energizar o modem e só depois soltar o botão, a outra opção consiste em ligar o modem normalmente e, depois que este estiver no modo de dados (modo de operação regular) enviar a sequência de caracteres &quot;<strong>+++</strong>&quot; e esperar 1 segundo. Realizado qualquer um dos dois métodos a mensagem &quot;NO CARRIER OK&quot; deve aparecer no monitor indicando a entrada no modo de configuração.</p>
<div class="figure align-center">
<img alt="../../../_images/NOCARRIER.png" src="../../../_images/NOCARRIER.png" />
</div>
<div class="section" id="comandos-basicos">
<h2>Comandos Básicos<a class="headerlink" href="#comandos-basicos" title="Permalink to this headline">¶</a></h2>
<p>Uma vez acessado o modo de configuração, podemos começar a dar comandos ao modem. Todos os comandos do modem possuem um prefixo de dois caracteres &quot;<strong>AT</strong>&quot;, logo depois desses dois caracteres deve ser inserido o comando propriamente dito. Por exemplo, o comando que retorna para o modo de transmissão de dados é o comando &quot;<strong>A</strong>&quot;, portanto para retornar ao modo de dados deve-se digitar <code class="docutils literal notranslate"><span class="pre">ATA</span></code>.</p>
<p>O comando <code class="docutils literal notranslate"><span class="pre">ATI</span></code> retorna informações sobre o modem P900. O comando <code class="docutils literal notranslate"><span class="pre">ATlogin</span></code> protege as configurações e o acesso ao modo de comando por uma senha a ser definida pelo usuário. O comando <code class="docutils literal notranslate"><span class="pre">ATM</span></code> ativa um menu do modo de operação de rede malha, que será explicado mais a frente, útil para identificação de erros e obtenção de logs. Já o comando <code class="docutils literal notranslate"><span class="pre">AT&amp;V</span></code> imprime os nomes e valores atuais dos registradores <strong>S</strong>, enquanto o comando <code class="docutils literal notranslate"><span class="pre">AT&amp;V1</span></code> exibe um conjunto completo de parâmetros avançados do usuário. Vale destacar também o comando <code class="docutils literal notranslate"><span class="pre">AT&amp;W</span></code>, ele escreve as alterações feitas nos registradores do modem, se esse último comando não for executado antes de sair do modo de configuração todas as alterações serão descartadas.</p>
<div class="figure align-right">
<a class="reference internal image-reference" href="../../../_images/P900_Fn.png"><img alt="../../../_images/P900_Fn.png" src="../../../_images/P900_Fn.png" style="width: 180px;" /></a>
</div>
<p>Por ultimo, o comando <code class="docutils literal notranslate"><span class="pre">AT&amp;Fn</span></code>, em <em>n</em> é o valor que representa os perfis de configuração (imagem a direita), permite a configuração rápida do sistema, definindo configurações de fabrica recomendadas para cada modo de operação. Tais configurações de fábrica alteram todas as configurações necessárias para iniciar a comunicação padrão com outros tipos de unidades. Este comando e os modos de operação serão explicados de forma detalhada adiante.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A seção 6.1 (página 80) do manual de instruções do modem P900 apresenta mais detalhes a respeito dos comandos AT.</p>
</div>
</div>
<div class="section" id="registradores">
<h2>Registradores<a class="headerlink" href="#registradores" title="Permalink to this headline">¶</a></h2>
<p>A maior parte das configurações do modem são feitas através da configuração dos Registradores (<strong>S</strong>). Para isso, deve-se utilizar o comando <code class="docutils literal notranslate"><span class="pre">ATSn=&lt;value&gt;</span></code>, no qual a letra &quot;<em>n</em>&quot; deve ser trocada pelo valor do registrador desejado. Destacasse ainda os comandos <code class="docutils literal notranslate"><span class="pre">ATSn?</span></code>, consulta o valor atual do registrador <em>n</em>, e <code class="docutils literal notranslate"><span class="pre">ATSn/?</span></code>, disponibiliza mais informações sobre o registrador <em>n</em>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>O modem apresenta muitos registradores, portanto nem todos serão relatados aqui. Mais informações sobre a configuração dos registradores estão disponiveis na seção 6.2 (página 83) do manual de instruções do modem P900.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Quase todas as características do modem podem ser alteradas através dos registradores, todavia, para fazê-las, recomenda-se consultar o manual para especificações detalhadas.</p>
</div>
<p>O registrador &quot;<strong>S0</strong>&quot; é usado para selecionar o modo no qual o dispositivo é ligado, podendo ser configurado para iniciar no modo de comando ou no modo de dados (padrão). O caractere de escape (0-255) usado na detecção de escape para colocar o modem offline pode ser desabilitado/alterado no registrador &quot;<strong>S2</strong>&quot;. Já a função do modem dentro do modo de operação, a velocidade da comunicação serial com o dispositivo conectado ao modem e a velocidade da comunicação com os outros modens via propagação de ondas eletromagnéticas podem ser modificadas nos registradores &quot;<strong>S101</strong>&quot;, &quot;<strong>S102</strong>&quot; e &quot;<strong>S103</strong>&quot;, respectivamente. O formato da comunicação serial com o dispositivo e o número mínimo de bytes a serem transmitidos podem ser alterados nos registradores &quot;<strong>S110</strong>&quot; e &quot;<strong>S111</strong>&quot;, respectivamente. O tipo de modo de operação é determinado pelo registrador &quot;<strong>S133</strong>&quot;. Enquanto o modo de comunicação serial é determinado pelo registrador &quot;<strong>142</strong>&quot;. Por último, o modo de acesso ao canal de comunicação pode ser alterado no registrador &quot;<strong>244</strong>&quot;.</p>
</div>
<div class="section" id="topologia-da-transmissao-de-dados">
<h2>Topologia da transmissão de dados<a class="headerlink" href="#topologia-da-transmissao-de-dados" title="Permalink to this headline">¶</a></h2>
<p>O modem Microhard P900 pode ser configurado para operar em três topologias de transmissão de dados: <strong>configuração de malha</strong>, <strong>configuração ponto-a-ponto</strong> e <strong>configuração ponto-a-multiponto</strong>.</p>
<div class="section" id="configuracao-de-malha">
<h3>Configuração de malha<a class="headerlink" href="#configuracao-de-malha" title="Permalink to this headline">¶</a></h3>
<p>A <strong>configuração de malha</strong> (<em>Mesh Network</em>) é um modo de operação onde todos os dispositivos conectados à rede comunicam-se entre si, a mensagem enviada por um modem é recebida simultaneamente por todos os outros modens com a mesma configuração, que estejam dentro da área de cobertura. Os rádios podem se comunicar diretamente ou, se necessário, por meio de outro nó da malha.</p>
<p>Nas situações em que um caminho direto entre os dispositivos de origem e de destino não está disponível, o roteamento pode encontrar rotas para assegurar que os dados sejam entregues ao destino necessário. A rede de malha pode ainda ser configurado de forma que caminhos redundantes estejam disponíveis para transferência de dados, rotas desconhecidas podem ser descobertas automaticamente e o melhor caminho é usado para alcançar o destino pretendido.</p>
<p>A configuração de malha é ativada configurando o registrador <strong>S133</strong> como &quot;2&quot; ou &quot;3&quot;. A imagem abaixo exemplifica o funcionamento do modo de operação da malha, onde existem vários caminhos que os dados podem seguir.</p>
<div class="figure align-center">
<img alt="../../../_images/Mesh_Network.png" src="../../../_images/Mesh_Network.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Mais informações sobre a Configuração de Malha podem ser encontradas no capítulo 3.0 - <em>Mesh Configuration</em> (pagina 33) do manual de instruções do modem P900.</p>
</div>
</div>
<div class="section" id="configuracao-ponto-a-ponto">
<h3>Configuração ponto-a-ponto<a class="headerlink" href="#configuracao-ponto-a-ponto" title="Permalink to this headline">¶</a></h3>
<p>Uma rede ponto-a-ponto (PTP) é um modo de operação em que a comunicação é apenas entre um modem &quot;mestre&quot; e um modem &quot;escravo&quot;. Pode haver repetidores de sinal entre eles, porém a mensagem enviada por um é recebida apenas pelo seu correspondente.</p>
<p>Uma rede ponto-a-ponto (PTP) é um modo de operação em que a rede cria um caminho para transferir dados entre o ponto A e o ponto B, onde o ponto A pode ser chamado de modem mestre e o ponto B de modem escravo. Essa rede PTP também pode envolver um ou mais repetidores (com capacidade de armazenar e encaminhar), caso necessário.</p>
<p>Uma configuração de PTP pode ainda atuar de uma forma mais dinâmico, podendo haver muitos escravos (e repetidores) dentro de uma rede, todavia, o mestre pode ter seu &quot;Endereço de destino&quot; (registrador S140) alterado quando necessário para se comunicar com um escravo específico. A configuração ponto a ponto é ativada configurando o registro S133 como 1 (ATS133 = 1).</p>
<p>A figura a seguir ilustra o funcionamento do modo de operação Ponto-a-Ponto, com e sem a intermediação de um repetidor.</p>
<div class="figure align-center">
<img alt="../../../_images/PTP_Network.png" src="../../../_images/PTP_Network.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Mais informações sobre a Configuração de Ponto-a-Ponto podem ser encontradas no capítulo 4.0 - <em>Point to Point Configuration</em> (pagina 57) do manual de instruções do modem P900.</p>
</div>
</div>
<div class="section" id="configuracao-ponto-a-multiponto">
<h3>Configuração ponto-a-multiponto<a class="headerlink" href="#configuracao-ponto-a-multiponto" title="Permalink to this headline">¶</a></h3>
<p>E, por último, existe a rede ponto-a-multiponto (PTM), onde o modem mestre cria um caminho para transferir dados a vários modems remotos. Os modems remotos podem ser simplesmente escravos com os quais o mestre se comunica diretamente e/ou repetidores usados para se comunicar com modens escravos. Todo e qualquer repetidor pode, também, atuar como escravos neste tipo de rede, ou seja, os repetidores não estão apenas armazenando e encaminhando dados, mas também agindo como Escravos. Esses repetidores podem ser referidos como &quot;Repetidores/Escravos&quot;. A configuração ponto-a-multiponto é ativado configurando o registro S133 como 0 (ATS133 = 0).</p>
<p>O diagrama abaixo demonstra o funcionamento da topologia Ponto-a-Multiponto.</p>
<div class="figure align-center">
<img alt="../../../_images/PTM_Network.png" src="../../../_images/PTM_Network.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Mais informações sobre a Configuração de Ponto-a-Multiponto podem ser encontradas no capítulo 5.0 - <em>Point to Multipoint Configuration</em> (página 68) do manual de instruções do modem P900.</p>
</div>
</div>
<div class="section" id="conclusao">
<h3>Conclusão<a class="headerlink" href="#conclusao" title="Permalink to this headline">¶</a></h3>
<p>Para a nossa aplicação, a topologia mais interessante é a topologia de malha. Nessa topologia todos os modens receberão a informação simultaneamente, sendo mais rápida que outras topologias, além disso a maior parte da informação gerada em nosso caso tem mesmo o objetivo de ser transmitida a todos os outros dispositivos.</p>
</div>
</div>
<div class="section" id="explorando-a-configuracao-de-malha">
<h2>Explorando a configuração de malha<a class="headerlink" href="#explorando-a-configuracao-de-malha" title="Permalink to this headline">¶</a></h2>
<p>Dado que utilizaremos a topologia de malha para a transmissão de dados no projeto, nessa seção iremos examinar e detalhar as principais características e funcionalidades dessa topologia em específico.</p>
<div class="section" id="modos-de-operacao-tipos-de-unidades">
<h3>Modos de operação/tipos de unidades<a class="headerlink" href="#modos-de-operacao-tipos-de-unidades" title="Permalink to this headline">¶</a></h3>
<p>No modo de malha da Microhard, existem quatro tipos de unidades ou modos de operação disponíveis: o <strong>coordenador primário</strong>, o <strong>coordenador secundário</strong>, o <strong>coordenador de espera</strong> e o <strong>remoto</strong>.</p>
<p>O papel do <strong>coordenador principal</strong> (<em>primary coordinator</em>) é prover sincronização de rede para o sistema, o que garante que todas as unidades estejam ativas e preparados para se comunicar conforme necessário. Em qualquer modo de malha, só pode haver um único coordenador primário. Coordenadores adicionais podem ser estabelecidos para redundância e/ou para estender a cobertura da rede a áreas não atendidas pelo coordenador principal. Para quaisquer unidades poderem se comunicar em uma malha, elas devem ser capazes de captar os dados de sincronização de um coordenador.</p>
<p>O diagrama abaixo simboliza uma unidade configurada como coordenador principal. Qualquer outra unidade de malha que possa receber os dados do coordenador principal, pode participar da rede de malha.</p>
<div class="figure align-center">
<img alt="../../../_images/Primary_Coordinator.png" src="../../../_images/Primary_Coordinator.png" />
</div>
<p>Os <strong>coordenadores secundários</strong> (<em>secondary coordinator</em>) são utilizados para estender a cobertura do coordenador principal. Aliás, mais de um coordenador secundário pode ser usado para redundância ou para garantir uma cobertura de rede adequada. O Coordenador Secundário deve se comunicar com o Coordenador Primário e/ou outro Coordenador Secundário para fornecer a sincronização adequada as unidades que atende.</p>
<p>Embora, toda e qualquer unidade em uma rede malha possa ser designada como coordenadora secundária, o número e o posicionamento dos coordenadores implementados devem ser levados em consideração. A razão para tal é que a sincronização de rede é obtida enviando ocasionalmente pacotes de sincronização, logo, quanto maior o número de coordenadores implantados, mais dados de sincronização serão transmitidos na rede e maior o potencial de colisões. Ou seja, adicionar um número excessivo de coordenadores pode não ser a melhor prática de design.</p>
<p>Coordenadores secundários são candidatos ideais para atuarem no roteamento. Como eles geralmente estão posicionados para fornecer cobertura para várias unidades, mais de uma unidade pode ser configurada para roteamento e, caso uma unidade fique offline, outra com o roteamento também ativado poderá continuar a fornecer os serviços de roteamento.</p>
<p>A ilustração a seguir mostra a cobertura da rede sendo estendida adicionando um coordenador secundário.</p>
<div class="figure align-center">
<img alt="../../../_images/Secondary_Coordinator.png" src="../../../_images/Secondary_Coordinator.png" />
</div>
<p>Um <strong>coordenador de espera</strong> (<em>standby coordinator</em>) atua monitorando o nível de sincronização da rede e, quando detecta que o coordenador principal está offline ou não está realizando suas tarefas de sincronização de rede, o coordenador de espera assume o controle. Vale ressaltar que somente um coordenador de espera pode ser usado em uma rede de malha.</p>
<p>O Coordenador de espera monitora a integridade do coordenador principal, analisando os pacotes de sincronização. Quando um número definido de <em>frames</em> já passou e nenhum dado de sincronização é recebido, o coordenador de espera pode intervir e começar a enviar dados de sincronização antes que a rede fique offline. Isso permite uma transição direta para o coordenador de espera, já que esperar que a rede perca a sincronização afetaria significativamente a rede, pois todo o processo de sincronização precisaria ser reiniciado.</p>
<p>Os coordenadores principal e de reserva devem estar localizados em um local que ofereça a maior cobertura de rede, um local físico seguro para evitar violações e próximo a uma fonte de energia adequada e confiável.</p>
<p>O diagrama abaixo mostra a rede de malha com a adição do coordenador de espera para fornecer um backup, caso o coordenador principal apresente falhas.</p>
<div class="figure align-center">
<img alt="../../../_images/Standby_Coordinator.png" src="../../../_images/Standby_Coordinator.png" />
</div>
<p>Um <strong>remoto</strong> ou escravo (<em>remote</em> ou <em>slave</em>) é qualquer unidade que não seja um coordenador. Um controle remoto geralmente está conectado a um dispositivo final, mas também pode ser implantado para fornecer caminhos redundantes para alcançar outros dispositivos na rede. Como em qualquer outro dispositivo da rede, o controle remoto pode ser usado para fornecer serviços de roteamento. Embora todas as unidades possam ser configuradas para fornecer serviços de roteamento, não é eficiente fazê-lo, pois haveria que lidar com uma grande sobrecarga de largura de banda da rede.</p>
<div class="figure align-center">
<img alt="../../../_images/Remote.png" src="../../../_images/Remote.png" />
</div>
<p>As unidades podem ser configuradas para desempenhar as várias funções apresentadas configurando o registro S101 da seguinte maneira:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 34%" />
<col style="width: 66%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Command</p></td>
<td><p>Setting</p></td>
</tr>
<tr class="row-even"><td><p>ATS101 = 2</p></td>
<td><p>Remote (Slave)</p></td>
</tr>
<tr class="row-odd"><td><p>ATS101 = 4</p></td>
<td><p>Primary coordinator</p></td>
</tr>
<tr class="row-even"><td><p>ATS101 = 5</p></td>
<td><p>Secondary coordinator</p></td>
</tr>
<tr class="row-odd"><td><p>ATS101 = 6</p></td>
<td><p>Standby coordinator</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="modos-de-acesso-ao-canal">
<h3>Modos de Acesso ao Canal<a class="headerlink" href="#modos-de-acesso-ao-canal" title="Permalink to this headline">¶</a></h3>
<p>Para gerenciar as transmissões de diversos dispositivos e minimizar as colisões de dados, os dispositivos da Série Pico também utilizam três modos de acesso de canal diferentes. Os três modos são <strong>Aloha</strong>, <strong>RTS/CTS</strong> e <strong>TDMA</strong>, que são configurados usando o registro <strong>S244</strong>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 76%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Command</p></td>
<td><p>Setting</p></td>
</tr>
<tr class="row-even"><td><p>S244 = 0</p></td>
<td><p>Aloha</p></td>
</tr>
<tr class="row-odd"><td><p>S244 = 1</p></td>
<td><p>RTS/CTS</p></td>
</tr>
<tr class="row-even"><td><p>S244 = 2</p></td>
<td><p>TDMA (transmit on slot number)</p></td>
</tr>
</tbody>
</table>
<p>O modo <strong>Aloha</strong> é um protocolo de acesso no qual sempre que um dispositivo possui dados a serem enviados, esse dispositivo aguarda um período aleatório e tenta enviar esse dado. Caso, nessa tentativa, seja recebido algum outro sinal pelo dispositivo, é assumido que houve colisão de dados e, portanto, a transmissão de dados é abortada, aguardam-se, novamente, um período de tempo aleatório até que a mensagem seja novamente enviada. O processo se repete até que o dado tenha sido inteiramente enviado sem que haja colisão.</p>
<p>O modo <strong>RTS/CTS</strong>, do inglês <em>Request to Send/Clear to Send</em>, é um modo que tem o objetivo de diminuir a colisão de transferência de dados, inclusive devido ao problema do terminal escondido. Nesse modo cada modem escravo, quando possui dados para enviar, solicita permissão de envio para o modem mestre por um canal alternativo, o modem mestre verifica se o canal principal está ocupado e responde à solicitação permitindo ou não a transferência de dados. As mensagens de solicitação e liberação são endereçadas para garantir que dois modens distintos não entendam que estão liberados para enviar informações.</p>
<p>Por último, o modo <strong>TDMA</strong>, do inglês <em>Time Domain Multiple Access</em>, nesse modo a cada modem é definido um intervalo de tempo ao qual o modem pode transmitir dados. Após o fim do intervalo de tempo de um modem se inicia o intervalo de tempo do modem seguinte e assim por diante, quando o intervalo de tempo do último modem acabar o processo se reinicia. Uma desvantagem desse modo é a necessidade de esperar um intervalo de tempo de um dispositivo mesmo que ele não possua dados para transmitir.</p>
<p>Dos modos apresentados o modo RTS/CTS é o modo que, aparentemente, vai apresentar melhor resultado, pois não é necessário esperar por dispositivos que não tem dados a enviar e apresenta pequenas chances de colisão de dados.</p>
</div>
</div>
<div class="section" id="configuracao-para-cada-tipo-de-unidade-no-modo-de-malha">
<h2>Configuração para cada tipo de unidade no modo de malha<a class="headerlink" href="#configuracao-para-cada-tipo-de-unidade-no-modo-de-malha" title="Permalink to this headline">¶</a></h2>
<p>Em nossa aplicação, serão utilizados, no mínimo, quatro modens do modelo Microhard P900, sendo que um deve ser ligado ao computador da Estação de Controle em Solo (ECS) e cada aeronave deve possuir um fixado ao chassi da aeronave. Já preparação do P900 consiste, principalmente, em configurar os registradores de cada dispositivo de acordo com as tarefas que o mesmo deve realizar.</p>
<p>Começando pela configuração da topologia da transmissão de dados, o modo de transmissão de malha é habilitado definindo o registro <strong>S133</strong> para 2 ou 3. Quanto ao modo de operação, o registrador que configura qual a função do modem a ser utilizada no modo malha é o <strong>S101</strong>. Observe a tabela a seguir, nela são mostrados os valores que de devem ser colocados no registrador <strong>S101</strong> para que o modem desempenhe o papel desejado.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 77%" />
<col style="width: 23%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Função</p></td>
<td><p>Valor</p></td>
</tr>
<tr class="row-even"><td><p>Remoto (Escravo)</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>Coordenador Primario</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p>Coordenador Secundario</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td><p>Coordenador de Espera</p></td>
<td><p>6</p></td>
</tr>
</tbody>
</table>
<p>Para auxiliar na configuração e implantação dos módulos da série Pico, as configurações padrão de fábrica pode ser usadas como um ponto de partida conhecido para cada tipo de unidade. O uso dos comandos padrão de fábrica define todos os valores dos registradores para as configurações recomendadas de fábrica e permite a conectividade inicial entre as unidades. Dessa forma, para a nossa aplicação de rede, podem ser necessários apenas pequenos ajustes para configurar e implantar uma rede de malha.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 74%" />
<col style="width: 26%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Configuração de fábrica</p></td>
<td><p>Comando</p></td>
</tr>
<tr class="row-even"><td><p>Coordenador Primário</p></td>
<td><p>AT&amp;F1</p></td>
</tr>
<tr class="row-odd"><td><p>Coordenador Secundário</p></td>
<td><p>AT&amp;F3</p></td>
</tr>
<tr class="row-even"><td><p>Remoto (Escravo)</p></td>
<td><p>AT&amp;F2</p></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Caso utilize as configurações padrão de fábrica, é sempre fundamental que as configurações do dispositivo sejam conferidas com cautela.</p>
</div>
<div class="section" id="comandos-de-configuracao">
<h3>Comandos de configuração<a class="headerlink" href="#comandos-de-configuracao" title="Permalink to this headline">¶</a></h3>
<p>A seguir, é apresentado os comandos que devem ser digitados no terminal após a verificação da mensagem &quot;NO CARRIER OK&quot; para que a configuração seja realizada com sucesso.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Para o *coordenador primário*
$ AT&amp;F1
$ AT&amp;W
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Para o *remoto*
$ AT&amp;F2
$ AT&amp;W
</pre></div>
</div>
<p>Após esses comandos, caso queira verificar se foram feitas corretamente as alterações nos registradores, use o comando abaixo e verifique se assemelha com as fotos a seguir.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ AT&amp;V
</pre></div>
</div>
<p>Para o coordenador primário é retornado os seguintes valores nos registradores (Atenção ao S101):</p>
<div class="figure align-center">
<img alt="../../../_images/Primario.png" src="../../../_images/Primario.png" />
</div>
<p>Para o remoto é retornado os seguintes valores nos registradores (Atenção ao S101):</p>
<div class="figure align-center">
<img alt="../../../_images/Remoto.png" src="../../../_images/Remoto.png" />
</div>
</div>
<div class="section" id="referencias">
<h3>Referências<a class="headerlink" href="#referencias" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>PITA, H. C. Desenvolvimento de sistema de comunicação multiplataforma para veículos aéreos de asa fixa. Faculdade de Tecnologia, Universidade de Brasília, 2018.</p></li>
<li><p>MICROHARD SYSTEMS INC. Pico Series P900 Operating Manual. 150 Country Hills Landing NW, Calgary, AB T3K 5P3, Canadá, 2016. v1.8.7. Disponível em: <a class="reference external" href="http://www.microhardcorp.com/">microhardcorp.com</a></p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="4.2-Modem_e_Computador.html" class="btn btn-neutral float-right" title="Modem e Computador Embarcado" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="4.0-intro.html" class="btn btn-neutral float-left" title="Comunicação Via Modem" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, Gabriel Araujo

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>