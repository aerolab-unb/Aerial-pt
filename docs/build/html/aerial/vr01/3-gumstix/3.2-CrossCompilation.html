

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en,pt-BR" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en,pt-BR" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Compilação Cruzada &mdash; CoopRobo 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Registradores" href="3.3-register.html" />
    <link rel="prev" title="Ambientando-se ao Linux" href="3.1-Ambient_Linux.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> CoopRobo
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Robots</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../aerial.html">Aerial Robots</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../vr01.html">VR-01</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../1-autopilot/1.0-pilot.html">Piloto Automatico</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-autopilot/1.1-config_pilot.html">Configuração do Piloto Automatico</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-embedded_system/2.0-embedded_system.html">Sistema Embarcado</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="3.0-intro.html">Utilizando o computador embarcado</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="3.1-Ambient_Linux.html">Ambientando-se ao Linux</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Compilação Cruzada</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.3-register.html">Registradores</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.4-Serial.html">Comunicação Serial</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../4-modem/4.0-intro.html">Comunicação Via Modem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../vr01.html#referencias">Referências</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../mobile.html">Mobile Robots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../manipulators.html">Manipulators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs-ref.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../camera.html">Camera</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">CoopRobo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../aerial.html">Aerial Robots</a> &raquo;</li>
        
          <li><a href="../../vr01.html">VR-01</a> &raquo;</li>
        
          <li><a href="3.0-intro.html">Utilizando o computador embarcado</a> &raquo;</li>
        
      <li>Compilação Cruzada</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/aerial/vr01/3-gumstix/3.2-CrossCompilation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="compilacao-cruzada">
<h1>Compilação Cruzada<a class="headerlink" href="#compilacao-cruzada" title="Permalink to this headline">¶</a></h1>
<p>A compilação cruzada ocorre quando um dispositivo compila um código fonte para uma plataforma diferente daquela que compilou o código, geralmente temos um ambiente de desenvolvimento que está em uma arquitetura diferente da arquitetura da placa em que vamos rodar nosso programa. Para que nossos notebooks ou desktops possam gerar um binário, programa que rode em outra arquitetura, acontece o <em>Cross Compile</em> (Compilação Cruzada, da tradução direta do inglês). Por exemplo, em nosso caso, um computador com Linux Ubuntu, utilizando um processador Intel ou AMD com arquitetura x86, irá compilar um código para o computador embarcado rodando um sistema Linux adaptado rodando em uma arquitetura completamente diferente.</p>
<p>Utilizar a compilação cruzada para trabalhar com sistemas embarcados é muito comum, principalmente quando estes não possuem capacidade de processamento para suportar um compilador. Para nós seria possível compilar no próprio sistema embarcado, porém, apesar de os recursos não serem tão limitados assim, não queremos desperdiça-los. Além disso programar em um computador regular com a disposição de diversos tipos de IDE diferentes é muito melhor do que programar em um computador embarcado com recursos de interface limitadas.</p>
<p>Para realizarmos esse processo de compilação cruzada precisamos primeiro obter um <em>software development kit</em>, também conhecido como Kit de desenvolvimento de software, SDK ou <em>devkit</em>. O SDK nada mais é que um conjunto de ferramentas de desenvolvimento de software que possibilita a criação e compilação dos softwares para um sistema diferente.</p>
<div class="section" id="instalando-o-sdk">
<h2>Instalando o SDK<a class="headerlink" href="#instalando-o-sdk" title="Permalink to this headline">¶</a></h2>
<p>Para obter o SDK para a imagem do sistema operacional que estamos utilizando basta executar os procedimentos a seguir:</p>
<ol class="arabic simple">
<li><p><strong>Criação dos diretórios</strong></p></li>
</ol>
<p>Criaremos um diretório chamado <strong>workspace</strong> onde você não apenas instalará o SDK, mas também compilará o código de exemplo. Escolha um local conveniente para você e execute os comandos.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir workspace
$ cd workspace
$ wget http://gumstix-yocto.s3.amazonaws.com/sdk.sh
</pre></div>
</div>
<div class="figure align-center">
<img alt="../../../_images/sdk_download.png" src="../../../_images/sdk_download.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>O comando <code class="docutils literal notranslate"><span class="pre">wget</span></code> irá efetuar download do SDK para sistemas Gumstix. Esse processo pode demorar um pouco, a depender da sua velocidade de download.</p>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Verificando as permissões</strong></p></li>
</ol>
<p>Após o fim do download, verifique as permissões do arquivo executando o comando <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-la</span> <span class="pre">sdk.sh</span></code>. Se o terminal retornar que há permissão para executar este arquivo, pule para o próximo procedimento. Caso contrário, será necessário alterar as permissões do arquivo através do comando <code class="docutils literal notranslate"><span class="pre">chmod</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Relembrando, os três primeiras espaços indicam as permissões do dono e, basicamente, temos 3 permissões básicas, &quot;r&quot;, &quot;w&quot; e &quot;x&quot; indicando permissão para leitura, escrita e execução, respectivamente.</p>
</div>
<p>Por exemplo, na imagem abaixo, o arquivo possui permissão para leitura e escrita, mas não pode ser executado.</p>
<div class="figure align-center">
<img alt="../../../_images/sdk_permission.png" src="../../../_images/sdk_permission.png" />
</div>
<p>Para adicionar a permissão para execução, basta executar o comando <code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">+x</span> <span class="pre">sdk.sh</span></code> e</p>
<div class="figure align-center">
<img alt="../../../_images/sdk_permission2.png" src="../../../_images/sdk_permission2.png" />
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Instalação</strong></p></li>
</ol>
<p>Execute o arquivo <em>sdk.sh</em>. Assim que solicitado, digite o diretório que deseja instalar o SDK (recomendamos a criação de um repositório chamado <em>sdk</em>) e confirme.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./sdk.sh
</pre></div>
</div>
<div class="figure align-center">
<img alt="../../../_images/sdk_install.png" src="../../../_images/sdk_install.png" />
</div>
<ol class="arabic simple" start="4">
<li><p><strong>Configurando o ambiente</strong></p></li>
</ol>
<p>A instalação do SDK irá gerar uma pasta com o conteúdo apresentado na figura abaixo.</p>
<div class="figure align-center">
<img alt="../../../_images/sdk_ls.png" src="../../../_images/sdk_ls.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>O diretório &quot;sysroot&quot; contém os arquivos raiz dos dois sistemas, tanto do sistema que irá compilar o código quanto do sistema que irá executar o programa, e o primeiro arquivo da lista importa os endereços e variáveis importantes para a compilação do código.</p>
</div>
<p>Para podermos prosseguir com a compilação do código é necessária a execução da seguinte linha de comando:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">sdk</span><span class="o">/</span><span class="n">environment</span><span class="o">-</span><span class="n">setup</span><span class="o">-</span><span class="n">cortexa8hf</span><span class="o">-</span><span class="n">neon</span><span class="o">-</span><span class="n">poky</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnueabi</span>
</pre></div>
</div>
<div class="figure align-center">
<img alt="../../../_images/sdk_source.png" src="../../../_images/sdk_source.png" />
</div>
</div>
<div class="section" id="compilando-hello-world">
<h2>Compilando Hello World<a class="headerlink" href="#compilando-hello-world" title="Permalink to this headline">¶</a></h2>
<p>Uma vez realizada a instalação, podemos testar a compilação cruzada criando um simples script. Vamos criar um arquivo no editor de texto chamado <em>helloworld.c</em>, colar o código abaixo e salvar no diretório <em>workspace</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &lt;stdio.h&gt;</span>
<span class="nb">int</span> <span class="n">main</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">printf</span> <span class="p">(</span><span class="s2">&quot;Hello World!</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Agora podemos executar o comando <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">&lt;nome_do_código&gt;</span></code> para criar um arquivo binário executável do <em>helloworld.c</em>.</p>
<div class="figure align-center">
<img alt="../../../_images/sdk_compile.png" src="../../../_images/sdk_compile.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>O comando &quot;make&quot; é na verdade a simplificação de uma extensa linha de comando que chama um compilador <strong>arm-poky-Linux-gnueabi-gcc</strong> e dá a ele os parâmetros contidos na pasta SDK. Tudo isso graças ao comando &quot;source&quot; utilizado
anteriormente.</p>
</div>
<p>Uma vez obtido o executável do código basta copiá-lo para uma das pastas do cartão de memória transferi-lo para o Overo e executá-lo. Lembre-se que o diretório principal é o diretório <code class="docutils literal notranslate"><span class="pre">/home/root/</span></code>, então se o arquivo for colocado dentro deste diretório será bem fácil encontra-lo.</p>
<p>Depois de inserido o cartão de memória no Overo, podemos inicia-lo normalmente. Quando iniciado, vamos até o diretório em que o programa foi salvo e o executamos com o comando <code class="docutils literal notranslate"><span class="pre">./nome_do_código</span></code>. Se tudo ocorrer bem, o programa deverá ser executado, similar a figura abaixo.</p>
<div class="figure align-center">
<img alt="../../../_images/sdk_compile2.png" src="../../../_images/sdk_compile2.png" />
</div>
<div class="section" id="referencias">
<h3>Referências<a class="headerlink" href="#referencias" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>PITA, H. C. Desenvolvimento de sistema de comunicação multiplataforma para veículos aéreos de asa fixa. Faculdade de Tecnologia, Universidade de Brasília, 2018.</p></li>
<li><p><a class="reference external" href="https://github.com/gumstix/yocto-manifest/wiki/Cross-Compile-with-Yocto-SDK">Cross Compile with Yocto SDK</a> - github.com/gumstix</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="3.3-register.html" class="btn btn-neutral float-right" title="Registradores" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="3.1-Ambient_Linux.html" class="btn btn-neutral float-left" title="Ambientando-se ao Linux" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Gabriel Araujo

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>